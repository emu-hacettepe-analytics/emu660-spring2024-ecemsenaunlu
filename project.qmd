---
title: "Project Distribution of education levels by provinces and gender in Turkey over the years"

format:
  html:
    code-fold: true
    code-summary: "Show the code"
---

Welcome to my project page.

Keep an eye on this space to stay updated with my project activities.

![](images/analiz.gif){fig-align="center"}

# 1. Project Overview and Scope

In this study, the Completed education by province (15+ years old) data set made available by TUIK will be used. It contains data on gender distribution of education levels by province in Turkey between 2011 and 2021.

The population data set will be used to interpret the training data set meaningfully. This data set contains the numbers of women, men and total population in all cities in 2020.

With the 2020 Data set of Convicts Entered into Penal Institutions by Crime Type and Educational Level, crime situations in the provinces will be examined according to education levels in 2020.

With the Gross Domestic Product, 2020 data set, provinces' contribution volume data to the general Turkish domestic national product is kept. With this data set, it is aimed to associate the education data set with the contributions of the provinces to Turkey's gross national product.

# 2. Data

You can see education data below.

[Also, click and reach .RData's File](https://github.com/emu-hacettepe-analytics/emu660-spring2024-ecemsenaunlu/tree/main/data)

```{r}

suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

education <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/education.xls")

library(dslabs)
head(education)


```

You can see crime data set for 2020 below.

```{r}

suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

crime <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/crime.xls")

library(dslabs)
head(crime)


```
You can see population data set for 2020 below.

```{r}

suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

population <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/population.xls")

library(dslabs)
head(population)


```
You can see GSYMH data set for 2020 below.

```{r}

suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

GSYMH <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/GSYMH.xlsx")

library(dslabs)
head(GSYMH)


```
## 2.1 Data Source

Completed education by province (15+ years old)

2020 Data set of Convicts Entered into Penal Institutions by Crime Type and Educational Level, crime situations in the province

Address-Based Population Registration System Results, 2020, Table 3

Gross Domestic Product (GDP) 2018,2019,2020, Table 7

You can access following data sets from the link below:

[Reach Out To Data Source](https://data.tuik.gov.tr/Kategori/GetKategori?p=egitim-kultur-spor-ve-turizm-105&dil=1)


## 2.2 General Information About Data

Below you can find the names of all columns in the Education and Crime datasets and information about the data they represent.

Year : The Year where data is collected for statistical calculations.<br>

ProvinceID : The ProvinceID where data is collected for statistical calculations.

ProvinceName : The ProvinceName where data is collected for statistical calculations.

illiterateTotal : The illiterateTotal where Total number of illiterate people in Turkey.

illiterateMale : The IlliterateMale where Total number of illiterate men in Turkey.

illiterateFemale : The IlliterateFemale where Total number of illiterate women in Turkey.

LiterateWithoutADiplomaTotal :The LiterateWithoutADiplomaTotal is total number of people in Turkey which has no diploma.

LiterateWithoutADiplomaMale :The LiterateWithoutADiplomaTotal is total number of men in Turkey which has no diploma.

LiterateWithoutADiplomaFemale :The LiterateWithoutADiplomaTotal is total number of women in Turkey which has no diploma.

PrimarySchoolTotal : The PrimarySchoolTotal is number of people which graduated from Primary school in Turkey.

PrimarySchoolMale : The PrimarySchoolMale is number of men which graduated from Primary school in Turkey.

PrimarySchoolFemale : The PrimarySchoolMale is number of women which graduated from Primary school in Turkey.

PrimaryEducationTotal : The PrimaryEducationTotal is number of people which graduated from Primary Education in Turkey. <br>

PrimaryEducationMale : The PrimaryEducationMale is number of men which graduated from Primary Education in Turkey.

PrimaryEducationFemale : The PrimaryEducationFemale is number of women which graduated from Primary Education in Turkey.

LowerSecondarySchoolTotal : The LowerSecondarySchoolTotal is number of people which graduated from Lower Secondary School in Turkey.

LowerSecondarySchoolMale :The LowerSecondarySchoolMale is number of men which graduated from Lower Secondary School in Turkey.

LowerSecondarySchoolFemale :The LowerSecondarySchoolFemale is number of women which graduated from Lower Secondary School in Turkey.

UpperSecondarySchoolTotal :The UpperSecondarySchoolTotal is number of people which graduated from Upper Secondary School in Turkey.

UpperSecondarySchoolMale :The LowerSecondarySchoolMale is number of men which graduated from Upper Secondary School in Turkey.

UpperSecondarySchoolFemale :The LowerSecondarySchoolFemale is number of women which graduated from Upper Secondary School in Turkey.

HigherEducationalinstitutionsTotal :The HigherEducationalinstitutionsTotal is number of people which graduated from Higher Educational institutions in Turkey.

HigherEducationalinstitutionsMale :The HigherEducationalinstitutionsMale is number of men which graduated from Higher Educational institutions in Turkey.

HigherEducationalinstitutionsFemale :The HigherEducationalinstitutionsFemale is number of women which graduated from Higher Educational institutions in Turkey.

MasterTotal :The MasterTotal is number of people which graduated from Master in Turkey.

MasterMale : The MasterTotal is number of men which graduated from Master in Turkey.

MasterFemale : The MasterTotal is number of women which graduated from Master in Turkey.

DoctorateTotal : The DoctorateTotal is number of people which graduated from Master in Turkey.

DoctorateMale :The DoctorateTotal is number of men which graduated from Master in Turkey.

DoctorateFemale :The DoctorateTotal is number of women which graduated from Master in Turkey.

UnknownTotal : The UnknownTotal is the number of people whose educational status is unknown in Turkey.

UnknownMale :The UnknownTotal is the number of men whose educational status is unknown in Turkey.

UnknownFemale :The UnknownTotal is the number of women whose educational status is unknown in Turkey.


Below you can find the names of all columns in the Population dataset and information about the data they represent.

Provinces : The Provinces where data is collected for statistical calculations.

TotalPopulation : TotalPopulation data gives the total number of people living in that city.

TotalFemale : TotalPopulation data gives the total number of women living in that city.

TotalMale : TotalPopulation data gives the total number of men living in that city.


Below you can find the names of all columns in the GSYMH dataset and information about the data they represent.

ProvinceNames : The Provinces where data is collected for statistical calculations.

2018 : It is the contribution rate of cities to Turkey's Gross National Product in 2018.

2019 : It is the contribution rate of cities to Turkey's Gross National Product in 2019.

2020 : It is the contribution rate of cities to Turkey's Gross National Product in 2020.

## 2.3 Reason of Choice

The change in education level by province in Turkey over the years is an interesting data set. Comments can be made on how the relevant data has changed and developed over the years. For this reason, the changes in Turkey's literacy rates and postgraduate education rates according to provinces and years will be examined in detail.

Additionally, a second data set will be used to examine the relationship between education levels and crime rates. This data set provides us with crimes and crime rates according to education levels in 2020. In addition, it is seen that the 2020 population numbers of the provinces are an important data source for the correct evaluation of the relevant data. 

In addition, another data set showing the contribution of provinces to Turkey's gross national product will be used. I predict that there is a linear relationship between this data and graduate education rates in cities. An analysis will be carried out in this direction.

# 2.4 Data Preprocessing

Data preprocessing was carried out to edit the Turkish characters in the Turkey data set that we will use on the map, and the uses of K. Maras and KahramanMaras, which are not common with other data sets.

```{r}

library(ggrepel)
library(sf)
library(dplyr)
library(ggplot2)
library(sf)
library(dplyr)
library(rnaturalearth)
library(rnaturalearthdata)
library(devtools)

devtools::install_github("ropensci/rnaturalearthhires")

turkey <- ne_states(country = "Turkey", returnclass = "sf")
head(turkey$`name`)
turkey$name <- iconv(turkey$name, "UTF-8", "ASCII//TRANSLIT")
turkey$name <- gsub("Igdir", "igdir", turkey$name, fixed = TRUE)
turkey$name <- gsub("Zinguldak", "Zonguldak", turkey$name, fixed = TRUE)
turkey$name <- gsub("Kinkkale", "Kirikkale", turkey$name, fixed = TRUE)
turkey$name <- gsub("Sirnak", "sirnak", turkey$name, fixed = TRUE)
turkey$name <- gsub("Sanliurfa", "sanliurfa", turkey$name, fixed = TRUE)
turkey$name <- gsub("K. Maras", "Kahramanmaras", turkey$name, fixed = TRUE)
turkey$name <- gsub("Afyonkarahisar", "Afyon", turkey$name, fixed = TRUE)
turkey$name <- gsub("Canakkale", "canakkale", turkey$name, fixed = TRUE)
turkey$name <- gsub("Cankiri", "cankiri", turkey$name, fixed = TRUE)
turkey$ProvinceNames <- turkey$name
turkeyChanged <- turkey
```
# 3. Analysis

We will have many summary data thanks to the data set that will enable us to analyze education levels in Turkey. And we will observe the relationships between them and crime data.

## 3.1 Exploratory Data Analysis

Below you see the graph of the total number of illiterate people in Turkey according to years. From the graph, it can be observed that the number of illiterate people in Turkey has decreased over the years. Stay tuned for many more summary data like this and analysis of the relationships between data.

```{r}
suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

education <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/education.xls")


education2 <- education %>%
  group_by(Year) %>%
  summarise(illiterateYearTotal = sum(illiterateTotal))


education2 %>%
  ggplot(aes(x = Year, y = illiterateYearTotal)) +
  geom_bar(stat = "identity", fill = "purple") +
  labs(title = "Distribution of Illiterate Total Per Year",
       x = "Year",
       y = "Illiterate Total") +
 theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
       axis.text.y = element_text(size = 8))

```

```{r}
suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(ggplot2)

crime <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/crime.xls")

crime <- crime %>% mutate(CRilliterateTotal = CRilliterateMale + CRilliterateFemale)
crime2 <- crime %>%
  group_by(CRilliterateTotal)


crime2 %>%
  ggplot(aes(x = `Type of crime`, y = CRilliterateTotal)) +
  geom_bar(stat = "identity", fill = "green") +
  labs(title = "Distribution of Illiterate Total Per Type Of Crime",
       x = "Type of crime",
       y = "Illiterate Total") +
 theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
       axis.text.y = element_text(size = 8))

```

## 3.2 Trend Analysis

First of all, how many doctoral and master's students were in each city in 2020, these statistics will be discussed.

```{r}
suppressPackageStartupMessages(library(dplyr))
library(readxl)
library(dplyr)
library(tidyr)
library(ggplot2)

education <- read_excel("C:/Users/w10/Documents/GitHub/emu660-spring2024-ecemsenaunlu/data/education.xls")


education2020 <- education %>% filter(Year == 2020)

education2020 %>%
  ggplot(aes(x = ProvinceName, y = DoctorateTotal)) +
  geom_bar(stat = "identity", fill = "purple") +
  labs(title = "Distribution of Doctorate Total per Province in 2020",
       x = "Province",
       y = "Doctorate Total") +
 theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
       axis.text.y = element_text(size = 8))

```

## 3.3 Model Fitting

First of all, in Exploratory Data Analysis, it is seen that the training data alone is insufficient to explain the data. For this reason, it was decided to benefit from the population data of 2020. The data on the proportion of people with doctorate and master's degrees in which city are located compared to the population will be examined.

```{r}

library(dplyr)
result <- inner_join(education2020, population, by = "ProvinceName")

DoctorateResult <- result %>%
  mutate(DoctoratePercentage = DoctorateTotal / TotalPopulation * 100 )

Doctorate <- DoctorateResult %>%
  ggplot() +
  geom_bar(aes(x = ProvinceName, y = DoctoratePercentage), 
           stat = "identity", fill = "blue", position = "dodge") + 
  labs(title = "Distribution of Doctorate Total per Total Population by Province in 2020",
       x = "Province",
       y = "Percentage") +
  theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
        axis.text.y = element_text(size = 8))


result <- inner_join(education2020, population, by = "ProvinceName")

MasterResult <- result %>%
  mutate(MasterPercentage = MasterTotal / TotalPopulation * 100)

Master <- MasterResult %>%
  ggplot() +
  geom_bar(aes(x = ProvinceName, y = MasterPercentage), 
           stat = "identity", fill = "purple", position = "dodge") + 
  labs(title = "Distribution of Master Total per Total Population by Province in 2020",
       x = "Province",
       y = "Percentage") +
  theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
        axis.text.y = element_text(size = 8))

library(gridExtra)

grid.arrange(Doctorate, Master, nrow = 2)
```

We see that Ankara is the province with the highest percentage of people with doctorate and master's degrees in 2020. It seems that the cities in the top 10 list with a high percentage of both master's and doctorate degrees are Ankara, Isparta, Eskişehir, Edirne, Canakkale, Izmir and Istanbul.

```{r}
top_master <- MasterResult %>%
  arrange(desc(MasterPercentage)) %>%
  head(10)

top_doctorate <- DoctorateResult %>%
  arrange(desc(DoctoratePercentage)) %>%
  head(10)

topMaster <- ggplot(top_master) +
  geom_bar(aes(x = reorder(ProvinceName, -MasterPercentage), y = MasterPercentage), 
           stat = "identity", fill = "purple", position = "dodge") + 
  labs(title = "Distribution of the provinces with the highest percentage of master's degrees in 2020",
       x = "Province",
       y = "Percentage") +
  theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
        axis.text.y = element_text(size = 8))

topDoctorate <- ggplot(top_doctorate) +
  geom_bar(aes(x = reorder(ProvinceName, -DoctoratePercentage), y = DoctoratePercentage), 
           stat = "identity", fill = "purple", position = "dodge") + 
  labs(title = "Distribution of the provinces with the highest percentage of Doctorate's degrees in 2020",
       x = "Province",
       y = "Percentage") +
  theme(axis.text.x = element_text(size = 8, angle = 90, vjust = 0.5, hjust = 1),
        axis.text.y = element_text(size = 8))

grid.arrange(topMaster, topDoctorate, nrow = 2)
```
```{r}
library(ggrepel)
library(sf)
library(dplyr)
library(ggplot2)
library(sf)
library(dplyr)
library(rnaturalearth)
library(rnaturalearthdata)
library(devtools)

devtools::install_github("ropensci/rnaturalearthhires")

GSYMH2020 <- GSYMH %>% select(ProvinceNames, `2020`)


turkeyChanged <- turkeyChanged[complete.cases(turkeyChanged$featurecla),]
turkeyGSYMH <- inner_join(turkeyChanged, GSYMH2020, by = c("name" = "ProvinceNames"))

ggplot(turkeyGSYMH) +
  geom_sf(aes(fill = `2020`), color = "black") +
  geom_sf_text(aes(label = ProvinceNames), size = 1.5, color = "black") +  
  scale_fill_continuous(low = "white", high = "blue", name = "GSYMH2020") +
  theme_minimal() +
  labs(title = "Turkey's Provinces by GSYMH2020",
       subtitle = "GSYMH2020 values for illustration purposes",
       caption = "Source: Generated data") +
  theme(axis.title.x = element_blank(),
        axis.title.y = element_blank(),
        axis.text = element_blank(),
        axis.ticks = element_blank())

```
## 3.4 Results

xxxxxx

# 4. Results and Key Takeaways

xxxxxx

